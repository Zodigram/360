<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>CSCI 360 Project Demo</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <script src="jquery.js"></script>
    <script src="variables.js"></script>
    <script src="opcode.js"></script>
    <script src="demo.js"></script>
</head>


<body>
<div class="container">
    <div class="panel panel-primary">
      <div class="panel-body" style="padding-top:0px;">
          <div class="row">
                <div class="col-sm-6" style="padding:5px;">
                <div class="panel panel-primary">
    <div class="panel-heading">Assembly Instruction Panel</div>
    <div class="panel-body" style="padding-top:0px;padding-bottom:0px;">
        <div class="row">
                <div class="col-xs-12">
                        <textarea  style="max-height:500px;overflow:scroll;font-size:20px;" class="form-control" rows="200" id="assemblyCode">try:
setMax(int&, int&):
        push    rbp
        mov     rbp, rsp
        mov     QWORD PTR [rbp-8], rdi
        mov     QWORD PTR [rbp-16], rsi
        mov     rax, QWORD PTR [rbp-16]
        mov     eax, DWORD PTR [rax]
        cmp     eax, -1
        jne     .L2
        mov     rax, QWORD PTR [rbp-8]
        mov     edx, DWORD PTR [rax]
        mov     rax, QWORD PTR [rbp-16]
        mov     DWORD PTR [rax], edx
        jmp     .L4
.L2:
        mov     rax, QWORD PTR [rbp-16]
        mov     edx, DWORD PTR [rax]
        mov     rax, QWORD PTR [rbp-8]
        mov     eax, DWORD PTR [rax]
        cmp     edx, eax
        jge     .L4
        mov     rax, QWORD PTR [rbp-8]
        mov     edx, DWORD PTR [rax]
        mov     rax, QWORD PTR [rbp-16]
        mov     DWORD PTR [rax], edx
.L4:
        nop
        pop     rbp
        ret
setMin(int&, int&):
        push    rbp
        mov     rbp, rsp
        mov     QWORD PTR [rbp-8], rdi
        mov     QWORD PTR [rbp-16], rsi
        mov     rax, QWORD PTR [rbp-16]
        mov     eax, DWORD PTR [rax]
        cmp     eax, -1
        jne     .L6
        mov     rax, QWORD PTR [rbp-8]
        mov     edx, DWORD PTR [rax]
        mov     rax, QWORD PTR [rbp-16]
        mov     DWORD PTR [rax], edx
        jmp     .L8
.L6:
        mov     rax, QWORD PTR [rbp-16]
        mov     edx, DWORD PTR [rax]
        mov     rax, QWORD PTR [rbp-8]
        mov     eax, DWORD PTR [rax]
        cmp     edx, eax
        jle     .L8
        mov     rax, QWORD PTR [rbp-8]
        mov     edx, DWORD PTR [rax]
        mov     rax, QWORD PTR [rbp-16]
        mov     DWORD PTR [rax], edx
.L8:
        nop
        pop     rbp
        ret
.LC0:
        .string "Enter one integer:"
.LC1:
        .string "Max: "
.LC2:
        .string " Min: "
.LC3:
        .string "TEN INTEGERS REACHED"
main:
        push    rbp
        mov     rbp, rsp
        push    rbx
        sub     rsp, 56
        mov     DWORD PTR [rbp-24], -1
        mov     DWORD PTR [rbp-28], -1
        mov     DWORD PTR [rbp-20], 0
.L11:
        cmp     DWORD PTR [rbp-20], 9
        jg      .L10
        lea     rax, [rbp-64]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string() [complete object constructor]
        mov     esi, OFFSET FLAT:.LC0
        mov     edi, OFFSET FLAT:_ZSt4cout
        call    std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)
        lea     rax, [rbp-64]
        mov     rsi, rax
        mov     edi, OFFSET FLAT:_ZSt3cin
        call    std::basic_istream<char, std::char_traits<char> >& std::operator>><char, std::char_traits<char>, std::allocator<char> >(std::basic_istream<char, std::char_traits<char> >&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&)
        lea     rax, [rbp-64]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::c_str() const
        mov     rdi, rax
        call    atoi
        mov     DWORD PTR [rbp-32], eax
        lea     rdx, [rbp-28]
        lea     rax, [rbp-32]
        mov     rsi, rdx
        mov     rdi, rax
        call    setMax(int&, int&)
        lea     rdx, [rbp-24]
        lea     rax, [rbp-32]
        mov     rsi, rdx
        mov     rdi, rax
        call    setMin(int&, int&)
        mov     esi, OFFSET FLAT:.LC1
        mov     edi, OFFSET FLAT:_ZSt4cout
        call    std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)
        mov     rdx, rax
        mov     eax, DWORD PTR [rbp-28]
        mov     esi, eax
        mov     rdi, rdx
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
        mov     esi, OFFSET FLAT:.LC2
        mov     rdi, rax
        call    std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)
        mov     rdx, rax
        mov     eax, DWORD PTR [rbp-24]
        mov     esi, eax
        mov     rdi, rdx
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
        mov     esi, OFFSET FLAT:_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_
        mov     rdi, rax
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))
        add     DWORD PTR [rbp-20], 1
        lea     rax, [rbp-64]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        jmp     .L11
.L10:
        mov     esi, OFFSET FLAT:.LC3
        mov     edi, OFFSET FLAT:_ZSt4cout
        call    std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)
        mov     esi, OFFSET FLAT:_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_
        mov     rdi, rax
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))
        mov     eax, 0
        jmp     .L15
        mov     rbx, rax
        lea     rax, [rbp-64]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        mov     rax, rbx
        mov     rdi, rax
        call    _Unwind_Resume
.L15:
        add     rsp, 56
        pop     rbx
        pop     rbp
        ret
__static_initialization_and_destruction_0(int, int):
        push    rbp
        mov     rbp, rsp
        sub     rsp, 16
        mov     DWORD PTR [rbp-4], edi
        mov     DWORD PTR [rbp-8], esi
        cmp     DWORD PTR [rbp-4], 1
        jne     .L18
        cmp     DWORD PTR [rbp-8], 65535
        jne     .L18
        mov     edi, OFFSET FLAT:_ZStL8__ioinit
        call    std::ios_base::Init::Init() [complete object constructor]
        mov     edx, OFFSET FLAT:__dso_handle
        mov     esi, OFFSET FLAT:_ZStL8__ioinit
        mov     edi, OFFSET FLAT:_ZNSt8ios_base4InitD1Ev
        call    __cxa_atexit
.L18:
        nop
        leave
        ret
_GLOBAL__sub_I_setMax(int&, int&):
        push    rbp
        mov     rbp, rsp
        mov     esi, 65535
        mov     edi, 1
        call    __static_initialization_and_destruction_0(int, int)
        pop     rbp
        ret</textarea>
                    <div style="max-height:500px;overflow:scroll;font-size:20px;" hidden id="address_code" >
                        <table class="table" >
                                <thead>
                                <tr style="text-align:center;">
                                        <th width="20%">Address</th>
                                        <th width="80%">Instruction</th>
                                </tr>
                                </thead>
                                <tbody id="address_code_table">

                                </tbody>
                        </table>

                    </div>

                </div>

        </div>
            <div class="row" style="margin-top:10px;padding-bottom:10px;">
                    <div class="col-xs-8"></div>
                    <div class="col-xs-4">
                            <button class="btn btn-primary" onclick="edit()">Edit</button>
                            <button class="btn btn-success" onclick="load()">Load</button>
                    </div>
            </div>
    </div>
</div>
                <div class="panel panel-primary">
    <div class="panel-heading">Function Table</div>
    <div class="panel-body" style="padding-top:5px;padding-bottom:5px;">
        <div class="row">
            <table class="table" style="margin:0px;">
                <thead>
                <tr>
                    <th>Function</th>
                    <th>Address</th>
                </tr>
                </thead>
                <tbody id="function_address_table" style="max-height:200px;overflow:scroll;font-size:20px;">
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="panel panel-primary">
    <div class="panel-heading">Tips</div>
    <div class="panel-body">
        <div class="row" >
            <div class="col-xs-12" id="tips">
                <pre>
1. Push return address for main function, assumed <font color="red">200</font>.
2. Push the rbp of the function that calls the main
   function, assumed <font color="red">3000</font>.
1. The function label does not take any action.
2. leave = mov rsp, rbp
	       pop rpb
3. ret   = pop rip
</pre>
            </div>
        </div>
    </div>
</div>
                </div>
                <div class="col-sm-6" style="padding:5px;">
                    <div class="row" >
                        <div class="col-xs-12">
                            <div class="panel panel-primary">
    <div class="panel-heading">Register Panel - 64/32 bits (base10)
    <button class="btn  btn-success" id="step" style="float:right;">step</button>
    </div>
    <div class="panel-body" style="font-size:20px;">
        <div class="row" >
            <div class="col-xs-2"><b>rbp</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rbp"
                                                                   style="background:#df9857;"></font>
            </div>
            <div class="col-xs-2"><b>rsp</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rsp"
                                                                   style="background:#df9857;"></font>
            </div>
            <div class="col-xs-2"><b>rip</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rip"
                                                                   style="background:#48e17a;"></font>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-2"><b>rax/eax</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rax"></font></div>
            <div class="col-xs-2"><b>rbx/ebx</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rbx"></font></div>
            <div class="col-xs-2"><b>rdi/edi</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rdi"></font></div>
        </div>
        <div class="row">
            <div class="col-xs-2"><b>rsi/esi</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rsi"></font></div>
            <div class="col-xs-2"><b>rdx/edx</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rdx"></font></div>
            <div class="col-xs-2"><b>rcx/ecx</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="rcx"></font></div>
        </div>
        <div class="row">
            <div class="col-xs-2"><b>r8/r8d</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="r8"></font></div>
            <div class="col-xs-2"><b>r9/r9d</b></div>
            <div class="col-xs-2" style="padding-left:10pt;"><font id="r9"></font></div>
        </div>
    </div>
</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="panel panel-primary">
    <div class="panel-heading">Stack Panel</div>
    <div class="panel-body">
        <div class="row" >
            <table class="table" style="margin:0px;">
                <thead>
                <tr >
                    <th width="33%" style="text-align:center;">&nbsp;&nbsp;Address</th>
                    <th width="33%" style="text-align:center;">&nbsp;&nbsp;Content</th>
                    <th width="33%" style="text-align:center;">&nbsp;&nbsp;Label</th>
                </tr>
                </thead>
            </table>
            <div style="height:350px;overflow-y:scroll;">
            <table class="table" style="margin:0px;font-size: 20px;">
                <tbody id="stack_table" style='text-align:center;'>
                </tbody>
            </table>
            </div>
        </div>
    </div>
</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="panel panel-primary">
                                <div class="panel-heading">Memory</div>
                                <div class="panel-body" style="height:120px;overflow:scroll;">
                                    <div class="row">
                                        <div class="col-xs-12">add your memory data here</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
          </div>
      </div>
    </div>
    <div class="row" style="text-align:center;">
        <div>@ Xiaojie Zhang</div>
        <div>This web-tool is only for education purpose.</div>
    </div>
</div>

</body>
</html>